<!DOCTYPE html>
<html>
  <head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Mico</title>

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

    <!-- fonts style -->
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap"
      rel="stylesheet"
    />

    <!--owl slider stylesheet -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
    />

    <!-- font awesome style -->
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <!-- nice select -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css"
      integrity="sha256-mLBIhmBvigTFWPSCtvdu6a76T+3Xyt+K571hupeFLg4="
      crossorigin="anonymous"
    />
    <!-- datepicker -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.css"
    />
    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="css/responsive.css" rel="stylesheet" />
    <style>
      .error {
        color: red;
        display: none;
      }
    </style>
  </head>

  <body>
    <div class="hero_area">
      <!-- header section strats -->
      <header class="header_section">
        <div class="header_bottom">
          <div class="container-fluid">
            <nav class="navbar navbar-expand-lg custom_nav-container">
              <a class="navbar-brand" href="index.html">
                <img src="images/liver_logo.png" alt="" />
              </a>

              <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class=""> </span>
              </button>

              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <div
                  class="quote_btn-container"
                  style="margin-left: 37%; color: white; font-size: 26px"
                >
                  <span> Liver Disorder prediction </span>
                </div>
              </div>
            </nav>
          </div>
        </div>
      </header>
      <!-- end header section -->
      <!-- slider section -->
      <section class="slider_section">
        <div class="dot_design">
          <img src="images/dots.png" alt="" />
        </div>
        <div id="customCarousel1" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <div class="container">
                <div class="row">
                  <div class="col-md-6">
                    <div class="detail-box">
                      <div class="play_btn">
                        <button>
                          <i class="fa fa-play" aria-hidden="true"></i>
                        </button>
                      </div>
                      <h1>
                        AI <br />
                        <span> Based </span>
                      </h1>
                      <p>
                        Liver disorders are a significant health concern
                        worldwide, often diagnosed late due to the subtle onset
                        of symptoms. Early detection is crucial for effective
                        treatment and improved patient outcomes. Machine
                        learning (ML) algorithms offer a promising approach to
                        predict liver disorders by analyzing complex medical
                        data and identifying patterns that might be overlooked
                        by traditional methods.
                      </p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="img-box">
                      <img src="images/liver-banner.jpg" alt="" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row">
                  <div class="col-md-6">
                    <div class="detail-box">
                      <div class="play_btn">
                        <button>
                          <i class="fa fa-play" aria-hidden="true"></i>
                        </button>
                      </div>
                      <h1>
                        AI <br />
                        <span> Based </span>
                      </h1>
                      <p>
                        Model will Classify patients based on their risk levels
                        for developing liver disease, allowing for targeted
                        monitoring and personalized treatment plans.
                      </p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="img-box">
                      <img src="images/slider-img.jpg" alt="" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel_btn-box">
            <a
              class="carousel-control-prev"
              href="#customCarousel1"
              role="button"
              data-slide="prev"
            >
              <img src="images/prev.png" alt="" />
              <span class="sr-only">Previous</span>
            </a>
            <a
              class="carousel-control-next"
              href="#customCarousel1"
              role="button"
              data-slide="next"
            >
              <img src="images/next.png" alt="" />
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
      </section>
      <!-- end slider section -->
    </div>

    <!-- book section -->

    <section class="book_section layout_padding">
      <div class="container">
        <div class="row">
          <div class="col">
            <form id="liverDisorderForm">
              <h4>Predict <span>Liver Disorder</span></h4>
              <div class="form-row">
                <div class="form-group col-lg-4">
                  <label for="inputGGT"
                    >GGT (Gamma-Glutamyl Transferase) level</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="GGT"
                    placeholder=""
                    name="GGT"
                  />
                  <div class="error" id="errorGGT">
                    Please enter a valid GGT level.
                  </div>
                </div>
                <div class="form-group col-lg-4">
                  <label for="inputAAP">AAP (Alkaline Phosphatase) level</label>
                  <input
                    type="text"
                    class="form-control"
                    id="AAP"
                    placeholder=""
                    name="AAP"
                  />
                  <div class="error" id="errorAAP">
                    Please enter a valid AAP level.
                  </div>
                </div>
                <div class="form-group col-lg-4">
                  <label for="inputTB">TB (Total Bilirubin)</label>
                  <input
                    type="text"
                    class="form-control"
                    id="TB"
                    placeholder=""
                    name="TB"
                  />
                  <div class="error" id="errorTB">
                    Please enter a valid TB level.
                  </div>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-lg-4">
                  <label for="inputDB">DB (Direct Bilirubin) level</label>
                  <input
                    type="text"
                    class="form-control"
                    id="DB"
                    placeholder=""
                    name="DB"
                  />
                  <div class="error" id="errorDB">
                    Please enter a valid DB level.
                  </div>
                </div>
                <div class="form-group col-lg-4">
                  <label for="inputIB">IB (Indirect Bilirubin) level</label>
                  <input
                    type="text"
                    class="form-control"
                    id="IB"
                    placeholder=""
                    name="IB"
                  />
                  <div class="error" id="errorIB">
                    Please enter a valid IB level.
                  </div>
                </div>
                <div class="form-group col-lg-4">
                  <label for="inputDeltaB"
                    >DELTA B (Delta Bilirubin) level</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="DELTA B"
                    placeholder=""
                    name="DELTA B"
                  />
                  <div class="error" id="errorDELTA B">
                    Please enter a valid DELTA B level.
                  </div>
                </div>
              </div>
              <div class="btn-box">
                <button type="submit" class="btn">Predict Now</button>
              </div>
              <div
                class="alert alert-success mt-3"
                role="alert"
                id="disease_result"
              >
                A simple success alert—check it out!
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- end book section -->

    <!-- about section -->

    <section class="about_section">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <div class="img-box">
              <img src="images/about-img.jpg" alt="" />
            </div>
          </div>
          <div class="col-md-6">
            <div class="detail-box">
              <div class="heading_container">
                <h2>About <span>Application</span></h2>
              </div>
              <p>
                "Liver disorder prediction" refers to the use of various
                techniques and models to anticipate the likelihood of
                individuals developing liver diseases or disorders. This
                predictive analysis can be crucial for early detection,
                prevention, and management of liver conditions. Model is trained
                accurately on real time data using various machine learning
                alogorithms in whcih random forest outperforms compared to other
                machine learning algorithms.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- end about section -->

    <!-- footer section -->
    <footer class="footer_section">
      <div class="container">
        <p>&copy; <span id="displayYear"></span> All Rights Reserved</p>
      </div>
    </footer>
    <!-- footer section -->

    <!-- jQery -->
    <script src="js/jquery-3.4.1.min.js"></script>
    <!-- bootstrap js -->
    <script src="js/bootstrap.js"></script>
    <!-- nice select -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"
      integrity="sha256-Zr3vByTlMGQhvMfgkQ5BtWRSKBGa2QlspKYJnkjZTmo="
      crossorigin="anonymous"
    ></script>
    <!-- owl slider -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <!-- datepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
    <!-- custom js -->
    <script src="js/custom.js"></script>
    <script>
      document.getElementById("disease_result").style.display = "none";
      // Handle single prediction form submission
      document.getElementById("liverDisorderForm").onsubmit = async function (
        event
      ) {
        event.preventDefault();

        // Initialize validation flag
        let isValid = true;

        // Get all input elements
        const inputs = document.querySelectorAll(
          '#liverDisorderForm input[type="text"]'
        );

        // Validate each input
        inputs.forEach(function (input) {
          const errorElement = document.getElementById("error" + input.name);
          if (
            input.value.trim() === "" ||
            isNaN(input.value) ||
            input.value < 0
          ) {
            errorElement.style.display = "block";
            isValid = false;
          } else {
            errorElement.style.display = "none";
          }
        });
        if (isValid) {
          const GGT = document.getElementById("GGT").value;
          const AAP = document.getElementById("AAP").value;
          const TB = document.getElementById("TB").value;
          const DB = document.getElementById("DB").value;
          const IB = document.getElementById("IB").value;
          const DELTAB = document.getElementById("DELTA B").value;

          const data = {
            GGT: parseFloat(GGT),
            AAP: parseFloat(AAP),
            TB: parseFloat(TB),
            DB: parseFloat(DB),
            IB: parseFloat(IB),
            "DELTA B": parseFloat(DELTAB),
          };

          const response = await fetch("http://127.0.0.1:5000/predict", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });

          const result = await response.json();
          console.log(result);
          let message = `Prediction: ${
            result.prediction === 1
              ? "Positive for Liver Disorder"
              : "Negative for Liver Disorder"
          }`;
          message += `<br>Probability: ${result.probability}`;
          document.getElementById("disease_result").style.display = "block";
          if (result.prediction == 1) {
            document.getElementById(
              "disease_result"
            ).textContent = `You have ${(result.probability * 100).toFixed(
              2
            )}% probability of having liver disorder.`;
          } else {
            document.getElementById(
              "disease_result"
            ).textContent = `You have ${(result.probability * 100).toFixed(
              2
            )}% probability of not having liver disorder.`;
          }
        }
      };
    </script>
  </body>
</html>
